"use strict";(()=>{var e={};e.id=961,e.ids=[961],e.modules={38013:e=>{e.exports=require("mongodb")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},35186:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>v,originalPathname:()=>h,patchFetch:()=>y,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>d,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>f});var o={};r.r(o),r.d(o,{GET:()=>u});var n=r(95419),a=r(69108),i=r(99678),c=r(78070),s=r(42010);async function u(e){try{let e=await (0,s.Ok)(),t=await e.aggregate([{$group:{_id:"$category",count:{$sum:1}}},{$project:{category:"$_id",count:1}},{$sort:{count:-1}}]).toArray(),r=await e.countDocuments();return c.Z.json([{category:"All Tools",count:r},...t])}catch(e){return console.error("Error fetching categories:",e),c.Z.json({error:"Failed to fetch categories"},{status:500})}}let l=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/categories/route",pathname:"/api/categories",filename:"route",bundlePath:"app/api/categories/route"},resolvedPagePath:"C:\\Users\\Heylel Yaka\\Desktop\\klicktools\\app\\api\\categories\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:p,staticGenerationAsyncStorage:g,serverHooks:d,headerHooks:v,staticGenerationBailout:f}=l,h="/api/categories/route";function y(){return(0,i.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:g})}},42010:(e,t,r)=>{r.d(t,{gC:()=>l,OE:()=>u,Ok:()=>s,Qh:()=>c});var o=r(38013);let n=function(){if(!process.env.MONGODB_URI)throw Error('Invalid/Missing environment variable: "MONGODB_URI"');let e=process.env.MONGODB_URI;return new o.MongoClient(e,{}).connect()}(),a=null;async function i(){return a||(a=(await n).db("klicktools")),a}async function c(){return(await i()).collection("users")}async function s(){return(await i()).collection("tools")}async function u(){return(await i()).collection("reviews")}async function l(){return(await i()).collection("favorites")}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[638,206],()=>r(35186));module.exports=o})();